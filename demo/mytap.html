<!DOCTYPE html>
<html>
<head>
	<title>normal_tap_click</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="description" content="">
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=320,initial-scale=1,minimum-scale=1, maximum-scale=1, user-scalable=no" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<style>
		a, span {
			max-width: 100px;
			min-height: 100px;
			display: block;
		}

		.before {
			background: red;
		}

		.after {
			background: #000000;
		}

		.log {
			width: 100%;
		}
	</style>
</head>
<body>
<div contenteditable="true" id="log">
	normal:
</div>
<h1>touchend->show->click</h1>
<a class="before" id="before">before</a>
<a class="after" id="after">after</a>

<div id="log"></div>
<script>
	function getEl(s) {
		return document.querySelector(s)
	}
	var before = getEl('#before');
	var after = getEl('#after');
	var log = getEl('#log');

	after.style.display = "";

	function writeLog(s) {
		log.innerHTML += (s + '\n');
	}
	before.addEventListener('touchend', function (e) {

		e.preventDefault();
		writeLog('prevent before.');

		writeLog('touchend before.');
		before.style.display = "none";
		after.style.display = "";
		writeLog('toggle display.');

		var target = e.target;
		var point = e.changedTouches[0] || e;
		var ev = document.createEvent('MouseEvents');
		ev.initMouseEvent('click', true, true, e.view, 1,
				point.screenX, point.screenY, point.clientX, point.clientY,
				e.ctrlKey, e.altKey, e.shiftKey, e.metaKey,
				0, null);
		ev._fake = true;
		target.dispatchEvent(ev);
		writeLog('init a fake click before.');
	});
	after.addEventListener('click', function (e) {
		writeLog('click after.');
	});
</script>
</body>
</html>